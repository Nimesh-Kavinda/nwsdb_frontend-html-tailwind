<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="shortcut icon"
      href="../assets/images/favicon.png"
      type="image/x-icon"
    />
    <title>Customer List - NWSDB Bandarawela</title>
  </head>
  <body
    class="font-inter bg-gradient-to-br from-slate-50 to-slate-200 min-h-screen"
  >
    <!-- ============ MAIN LAYOUT CONTAINER ============ -->
    <div class="flex h-screen">
      <!-- ============ MOBILE OVERLAY ============ -->
      <div
        id="mobileOverlay"
        class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden lg:hidden"
      ></div>

      <!-- ============ SIDEBAR NAVIGATION ============ -->
      <aside
        id="sidebar"
        class="fixed lg:relative inset-y-0 left-0 transform -translate-x-full lg:translate-x-0 transition-transform duration-300 ease-in-out z-50 lg:flex lg:flex-col lg:w-80 bg-gradient-to-b from-blue-600 via-blue-700 to-blue-800 shadow-2xl w-80"
      >
        <!-- Logo Section -->
        <div class="bg-white p-6 border-b border-gray-200 mb-4">
          <div class="flex items-center justify-center">
            <img
              src="../../src/assets/images/logo/logo.png"
              alt="NWSDB logo"
              class="h-14 w-auto"
              onerror="this.style.display='none'"
            />
          </div>
        </div>

        <!-- User Profile Section -->
        <div
          class="p-3 py-5 mx-3 bg-white/5 backdrop-blur-lg border border-white/10 rounded-xl"
        >
          <div class="flex items-center">
            <div
              class="w-9 h-9 bg-white rounded-full flex items-center justify-center mr-3"
            >
              <i class="fas fa-user text-blue-600 text-sm"></i>
            </div>
            <div class="flex-1 min-w-0">
              <h3 class="text-white text-xs font-semibold truncate">
                Demo User
              </h3>
              <p class="text-blue-200 text-xs">Staff Member</p>
            </div>
            <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
          </div>
        </div>

        <!-- Navigation Menu -->
        <nav class="px-3 py-4">
          <ul class="space-y-1">
            <li>
              <a
                href="dashbord.html"
                class="flex items-center px-3 py-5 text-blue-200 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-300"
              >
                <i class="fas fa-home text-sm mr-3"></i>
                <span class="font-medium text-sm">Dashboard</span>
              </a>
            </li>
            <li>
              <a
                href="upload.html"
                class="flex items-center px-3 py-5 text-blue-200 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-300"
              >
                <i class="fas fa-cloud-upload-alt text-sm mr-3"></i>
                <span class="font-medium text-sm">Upload New Customer</span>
              </a>
            </li>
            <li>
              <a
                href="customers.html"
                class="flex items-center px-3 py-5 text-white bg-white/10 rounded-lg border border-white/20 shadow-lg"
              >
                <i class="fas fa-users text-sm mr-3"></i>
                <span class="font-medium text-sm">Customer List</span>
              </a>
            </li>
            <li>
              <a
                href="settings.html"
                class="flex items-center px-3 py-5 text-blue-200 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-300"
              >
                <i class="fas fa-cog text-sm mr-3"></i>
                <span class="font-medium text-sm">Settings</span>
              </a>
            </li>
          </ul>
        </nav>

        <!-- Logout Section -->
        <div class="mt-auto p-3">
          <button
            onclick="handleLogout()"
            class="w-full flex items-center px-3 py-5 bg-red-500/30 hover:bg-red-500/30 border border-red-400/30 text-red-200 hover:text-red-100 rounded-lg transition-all duration-300"
          >
            <i class="fas fa-sign-out-alt text-sm mr-3"></i>
            <span class="font-medium text-sm">Logout</span>
          </button>
        </div>
      </aside>

      <!-- ============ MOBILE NAVIGATION TOGGLE ============ -->
      <div class="lg:hidden fixed top-4 left-4 z-50">
        <button
          id="mobileMenuToggle"
          class="bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-xl shadow-lg transition-all duration-300 hover:scale-105"
        >
          <i class="fas fa-bars text-lg"></i>
        </button>
      </div>

      <!-- ============ MAIN CONTENT AREA ============ -->
      <main class="flex-1 overflow-hidden">
        <div class="h-full overflow-y-auto">
          <div class="p-4 sm:p-6 lg:p-8">
            <!-- ============ PAGE HEADER SECTION ============ -->
            <div class="mb-8">
              <h1 class="text-3xl sm:text-4xl font-bold text-gray-900 mb-2">
                <i class="fas fa-users text-blue-600 mr-3"></i>Customer List
              </h1>
              <p class="text-gray-600 text-sm sm:text-base">
                Manage and view all customer details
              </p>
            </div>

            <!-- ============ FILTER SECTION ============ -->
            <div class="space-y-4 mb-8">
              <!-- Search Section -->
              <div
                class="bg-white rounded-xl p-4 shadow-md border border-gray-100"
              >
                <h3 class="text-sm font-bold text-gray-900 mb-3">
                  <i class="fas fa-search text-blue-600 mr-2"></i>Search
                </h3>
                <div class="flex gap-2">
                  <input
                    type="text"
                    id="searchAccount"
                    name="search"
                    placeholder="Search by account number..."
                    class="flex-1 px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 text-sm"
                  />
                  <button
                    type="button"
                    onclick="searchCustomers()"
                    class="px-6 py-2.5 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-semibold rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all duration-300 transform hover:scale-105 shadow-md text-sm whitespace-nowrap"
                  >
                    <i class="fas fa-search mr-1.5"></i>Search
                  </button>
                </div>
              </div>

              <!-- Filter Section -->
              <div
                class="bg-white rounded-xl p-4 shadow-md border border-gray-100"
              >
                <h3 class="text-sm font-bold text-gray-900 mb-3">
                  <i class="fas fa-filter text-blue-600 mr-2"></i>Filters
                </h3>

                <div
                  class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3"
                >
                  <!-- Filter by Region -->
                  <div>
                    <label
                      for="filterRegion"
                      class="block text-xs font-semibold text-gray-700 mb-1.5"
                    >
                      Region
                    </label>
                    <select
                      id="filterRegion"
                      name="region"
                      class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 bg-white text-sm"
                      onchange="applyFilters()"
                    >
                      <option value="">All Regions</option>
                      <option value="41-Bandarawela">41-Bandarawela</option>
                    </select>
                  </div>

                  <!-- Filter by Area -->
                  <div>
                    <label
                      for="filterArea"
                      class="block text-xs font-semibold text-gray-700 mb-1.5"
                    >
                      Area
                    </label>
                    <select
                      id="filterArea"
                      name="area"
                      class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 bg-white text-sm"
                      onchange="applyFilters()"
                    >
                      <option value="">All Areas</option>
                      <option value="02-Bandarawela">02-Bandarawela</option>
                      <option value="03-Badulla">03-Badulla</option>
                    </select>
                  </div>

                  <!-- Filter by WSS -->
                  <div>
                    <label
                      for="filterWSS"
                      class="block text-xs font-semibold text-gray-700 mb-1.5"
                    >
                      WSS
                    </label>
                    <select
                      id="filterWSS"
                      name="wss"
                      class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 bg-white text-sm"
                      onchange="applyFilters()"
                    >
                      <option value="">All WSS</option>
                      <option value="65-Ettampitiya">65-Ettampitiya</option>
                      <option value="17-Keppetipola">17-Keppetipola</option>
                      <option value="04-Bogahakumbura">04-Bogahakumbura</option>
                    </select>
                  </div>
                </div>

                <!-- Reset Filter Button -->
                <div class="mt-3">
                  <button
                    type="button"
                    onclick="resetFilters()"
                    class="px-4 py-2 bg-gradient-to-r from-gray-400 to-gray-500 text-white text-sm font-semibold rounded-lg hover:from-gray-500 hover:to-gray-600 transition-all duration-300 transform hover:scale-105 shadow-md"
                  >
                    <i class="fas fa-redo mr-1.5"></i>Reset
                  </button>
                </div>
              </div>
            </div>

            <!-- ============ CUSTOMER LIST SECTION ============ -->
            <div
              class="bg-white rounded-2xl p-6 shadow-lg border border-gray-100"
            >
              <h2 class="text-lg font-bold text-gray-900 mb-4">
                <i class="fas fa-list text-blue-600 mr-2"></i>Customers
              </h2>

              <!-- Customer List Container -->
              <div id="customerListContainer" class="space-y-4">
                <!-- SAMPLE CUSTOMER CARDS - Replace with PHP loop -->
                <!-- Structure: Each customer displayed as a card with ID, Name, Details, and Action Buttons -->

                <div
                  class="border border-gray-200 rounded-xl p-4 sm:p-5 hover:shadow-lg transition-all duration-300 hover:border-blue-300"
                >
                  <div
                    class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"
                  >
                    <!-- Customer Info -->
                    <div class="flex-1">
                      <div class="mb-2">
                        <h3
                          class="text-base sm:text-lg font-bold text-gray-900"
                        >
                          C001
                        </h3>
                        <p class="text-xs sm:text-sm text-gray-500">
                          John Perera
                        </p>
                      </div>

                      <!-- Details Grid -->
                      <div
                        class="grid grid-cols-2 sm:grid-cols-3 gap-2 mt-3 text-xs"
                      >
                        <div>
                          <span class="text-gray-500">Region:</span>
                          <p class="font-medium text-gray-900">
                            41-Bandarawela
                          </p>
                        </div>
                        <div>
                          <span class="text-gray-500">Area:</span>
                          <p class="font-medium text-gray-900">
                            02-Bandarawela
                          </p>
                        </div>
                        <div>
                          <span class="text-gray-500">WSS:</span>
                          <p class="font-medium text-gray-900">
                            65-Ettampitiya
                          </p>
                        </div>
                        <div class="col-span-2 sm:col-span-1">
                          <span class="text-gray-500">Uploaded:</span>
                          <p class="font-medium text-gray-900">23/10/2025</p>
                        </div>
                      </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="flex gap-2 sm:gap-3 flex-shrink-0">
                      <button
                        onclick="viewPDF('C001')"
                        class="flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-semibold rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all duration-300 transform hover:scale-105 shadow-md text-sm"
                        title="View PDF"
                      >
                        <i class="fas fa-eye"></i>
                        <span class="hidden sm:inline">View</span>
                      </button>
                      <button
                        onclick="downloadPDF('C001')"
                        class="flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white font-semibold rounded-lg hover:from-green-600 hover:to-green-700 transition-all duration-300 transform hover:scale-105 shadow-md text-sm"
                        title="Download PDF"
                      >
                        <i class="fas fa-download"></i>
                        <span class="hidden sm:inline">Download</span>
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Empty State -->
              <div id="emptyState" class="text-center py-12 hidden">
                <i class="fas fa-inbox text-gray-400 text-5xl mb-4 block"></i>
                <p class="text-gray-600 text-lg">
                  No customers found. Try adjusting your filters.
                </p>
              </div>

              <!-- Pagination Section -->
              <div
                id="paginationContainer"
                class="mt-6 flex flex-col sm:flex-row items-center justify-between gap-4 pt-6 border-t border-gray-200"
              >
                <div class="text-sm text-gray-600">
                  Showing <span id="startItem" class="font-semibold">1</span> to
                  <span id="endItem" class="font-semibold">12</span> of
                  <span id="totalItems" class="font-semibold">15</span>
                  customers
                </div>

                <div
                  id="paginationButtons"
                  class="flex items-center gap-2 flex-wrap justify-center"
                >
                  <!-- Pagination buttons will be generated by PHP -->
                  <button
                    class="px-3 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold rounded-lg transition-all duration-300 text-sm"
                    onclick="goToPage(1)"
                  >
                    1
                  </button>
                  <button
                    class="px-3 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-semibold rounded-lg transition-all duration-300 text-sm"
                    onclick="goToPage(1)"
                  >
                    1
                  </button>
                  <button
                    class="px-3 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold rounded-lg transition-all duration-300 text-sm"
                    onclick="goToPage(2)"
                  >
                    2
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <!-- ============ JAVASCRIPT SECTION ============ -->
    <script>
      // ============ LOGOUT FUNCTION ============
      function handleLogout() {
        if (confirm('Are you sure you want to logout?')) {
          localStorage.removeItem('userData');
          sessionStorage.clear();
          window.location.href = '../Auth/login.html';
        }
      }

      // ============ MOBILE MENU TOGGLE ============
      function toggleMobileMenu() {
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('mobileOverlay');
        const isOpen = sidebar.classList.contains('translate-x-0');

        if (isOpen) {
          sidebar.classList.remove('translate-x-0');
          sidebar.classList.add('-translate-x-full');
          overlay.classList.add('hidden');
          document.body.style.overflow = '';
        } else {
          sidebar.classList.remove('-translate-x-full');
          sidebar.classList.add('translate-x-0');
          overlay.classList.remove('hidden');
          document.body.style.overflow = 'hidden';
        }
      }

      // ============ SEARCH FUNCTION ============
      function searchCustomers() {
        const searchValue = document
          .getElementById('searchAccount')
          .value.trim();
        if (searchValue) {
          // TODO: Replace with PHP backend call
          // window.location.href = 'customers.php?search=' + encodeURIComponent(searchValue);
          alert('Search for: ' + searchValue);
        }
      }

      // ============ APPLY FILTERS FUNCTION ============
      function applyFilters() {
        // TODO: Replace with PHP backend call
        // Collect filter values and send to backend
        const region = document.getElementById('filterRegion').value;
        const area = document.getElementById('filterArea').value;
        const wss = document.getElementById('filterWSS').value;

        alert(
          'Filters applied:\nRegion: ' +
            region +
            '\nArea: ' +
            area +
            '\nWSS: ' +
            wss
        );
      }

      // ============ RESET FILTERS FUNCTION ============
      function resetFilters() {
        document.getElementById('searchAccount').value = '';
        document.getElementById('filterRegion').value = '';
        document.getElementById('filterArea').value = '';
        document.getElementById('filterWSS').value = '';
        // TODO: Replace with PHP backend call
        // window.location.href = 'customers.php';
        alert('Filters reset');
      }

      // ============ GO TO PAGE FUNCTION ============
      function goToPage(pageNumber) {
        // TODO: Replace with PHP backend call
        // window.location.href = 'customers.php?page=' + pageNumber;
        alert('Go to page: ' + pageNumber);
      }

      // ============ VIEW PDF FUNCTION ============
      function viewPDF(customerId) {
        // TODO: Replace with PHP backend call
        alert('Opening PDF for customer: ' + customerId);
      }

      // ============ DOWNLOAD PDF FUNCTION ============
      function downloadPDF(customerId) {
        // TODO: Replace with PHP backend call
        alert('Downloading PDF for customer: ' + customerId);
      }

      // ============ EVENT LISTENERS ============
      document
        .getElementById('mobileMenuToggle')
        ?.addEventListener('click', toggleMobileMenu);
      document
        .getElementById('mobileOverlay')
        ?.addEventListener('click', toggleMobileMenu);

      document.querySelectorAll('#sidebar a').forEach((link) => {
        link.addEventListener('click', function () {
          if (window.innerWidth < 1024) {
            toggleMobileMenu();
          }
        });
      });
    </script>
  </body>
</html>
